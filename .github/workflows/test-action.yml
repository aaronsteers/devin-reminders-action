name: Test Action

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  test-action:
    runs-on: ubuntu-latest
    permissions:
      actions: write
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Test list action (empty state)
        id: test-list
        uses: ./
        with:
          action: list
          devin-token: "test-token-placeholder"

      - name: Check list results
        run: |
          echo "Total count: ${{ steps.test-list.outputs.total-count }}"
          echo "Due count: ${{ steps.test-list.outputs.due-count }}"
